<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Municipalidad Provincial de Chiclayo</title>
    <link rel="icon" href="../imagenes/Escudo_de_Chiclayo.PNG" type="image/x-icon"> 
    <link rel="stylesheet" href="/MisEstilos/EstilosFormPC.css">
    <link rel="stylesheet" href="/MisEstilos/EstilosNavbar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    
    <form action="/guardarCambios/42" th:object="${tramiteUpdate}" method="POST" enctype="multipart/form-data">
    <div style="padding-top: 90px" class="contenedor-formulario">
       
        <h3 style=" padding-bottom: 15px;padding-left: 30px;">Registro de Personas para el programa contigo</h3></div>
        <div class="contenedor-subformulario">
          
            <div class="agrupador-cuadros">
                <label>DNI</label>
                <input type="text" id="dniDisc" th:field="*{discapacitado.persona.documentoDeIdentidad.nro_documento}" name="dni" >
            </div>
            <div class="agrupador-cuadros">
                <button class="boton" type="button" onclick="consumir1()">
                 <i class="fas fa-search"></i>  Buscar
                </button>
            </div>
            <div class="agrupador-cuadros2">
            </div>
            <div class="agrupador-cuadros">
                <label>Nombres</label>
                <input type="text" id="nomDisc" th:field="*{discapacitado.persona.nombre}"  readonly>
            </div>
            <div class="agrupador-cuadros">
                <label>Apellido Paterno</label>
                <input type="text" id="apellPaternoDisc" th:field="*{discapacitado.persona.apell_paterno}" readonly >
            </div>
            <div class="agrupador-cuadros">
                <label>Apellido Materno</label>
                <input type="text" id="apellMaternoDisc" th:field="*{discapacitado.persona.apell_materno}" readonly>
            </div>
            <div class="agrupador-cuadros">
                <label for="tipo-sexo">Sexo</label>
                 <input type="text" th:field="*{discapacitado.persona.sexo.nom_sexo}" name="sexo">
            </div>
            <div class="agrupador-cuadros">
                <label>Edad:</label>
                <input type="text" name="edad">
            </div>
            <div class="agrupador-cuadros">
                <label>Fecha de Nacimiento</label>
                <input type="date" th:value="*{discapacitado.fecha_Nac}"  name="fechN" >
            </div>
            <div class="agrupador-cuadros">
                <label>¿Pertenece a un Pueblo/Comunidad Indigena</label>
                <input type="text" th:field="*{discapacitado.com_indigena}"  >
            </div>
            <div class="agrupador-cuadros">
                <label>¿Se comunica con alguna lengua originaria</label>
                <input type="text" th:field="*{discapacitado.len_originaria}"  >
            </div>
            <div class="agrupador-cuadros">
                <label for="antepasado">Por su antepasados y de acuerdo a sus costumbres udtedes  se considera</label>
                <select name="autoPersepcion" id="antepasado">
                    <option value="" disabled selected>Seleccione una opción</option>
                    <option value="Quechua" th:selected="*{discapacitado.autopercepcion == 'Quechua'}">Quechua</option>
                    <option value="Aymara" th:selected="*{discapacitado.autopercepcion == 'Aymara'}" >Aymara</option>
                    <option value="Amazonia" th:selected="*{discapacitado.autopercepcion == 'Amazonia'}" >Nativo de la amazonia</option>
                    <option value="Blanco" th:selected="*{discapacitado.autopercepcion == 'Blanco'}" >Blanco</option>
                    <option value="Mestizo">Mestizo</option>
                    <option value="Afrodecendiente">Afrodecendiente</option>
                    <option value="Otro" th:selected="*{discapacitado.autopercepcion == 'Otro'}">Otro</option>
                    <option value="No">No sabe</option>
                  
                </select>
            </div>
            <div class="agrupador-cuadros">
                <label for="tipo-sexo">¿Maximo nivel de estudios alcanzados</label>
                <select name="nivelEstudio" id="nivelEstudio">
                    <option value="" disabled selected>Seleccione una opción</option>
          
                    <option th:each="item : ${nivelEstudios}" th:value="${item.id_nivel}" th:text="${item.nom_nivel}"
                        th:selected="*{discapacitado.estudios.nivelEstudio.id_nivel}== ${item.id_nivel}"   ></option>
                </select>
            </div>
            <div class="agrupador-cuadros">
                <label>Especifique:</label>
                <input type="text"  th:field="*{discapacitado.estudios.desc_estudios}" >
            </div>
            <div class="agrupador-cuadros2"  >
            </div>
        </div>
        <div class="titulo-datos">
           <h3> Direccion</h3>
        </div>
        <div class="contenedor-subformulario">
            <div class="agrupador-cuadros">
                <label for="Departamento">Departamento</label>
                  <input type="text" th:field="*{direc_disc.distrito.provincia.departamento.nom_departamento}" >
                
            </div>
            <div class="agrupador-cuadros">
                <label >Provincia</label>
                  <input type="text"  th:field="*{direc_disc.distrito.provincia.nom_ciudad}" >               
            </div>
            <div class="agrupador-cuadros">
                <label for="distritos">Distrito</label>
                <input type="text" th:field="*{direc_disc.distrito.nom_distrito}" name="distrito">
            </div>
            <div class="agrupador-cuadros">
                <label>Centro Poblado</label>
                <input type="text" th:field="*{direc_disc.centroPoblado}">
            </div>
            <div class="agrupador-cuadros">
                <label>Calle</label>
                <input type="text" th:field="*{direc_disc.calle}">
            </div>
            <div class="agrupador-cuadros">
                <label>Referencia</label>
                <input type="text" th:field="*{direc_disc.ref_direccion}">
            </div>
            <div class="agrupador-cuadros">
                <label>Telefono Fijo</label>
                <input type="text" th:field="*{discapacitado.tel_fijo}">
            </div>
            <div class="agrupador-cuadros">
                <label>Telefono Celular</label>
                <input type="text" th:field="*{discapacitado.celular}">
            </div>
            <div class="agrupador-cuadros">
                <label>Correo Electronico</label>
                <input type="text" th:field="*{discapacitado.correo}">
            </div>
            <div class="agrupador-cuadros">
               <label>Certificado de discapacidad parte 1</label>
               <input  type="file" id="imagen3" name="copiaCerPart1" accept="image/*"  >
                <span class="val" style="display: none" id="valid_cer1" >Campo obligatorio</span>
            </div>
            <div class="agrupador-cuadros">
                <label>Certificado de discapacidad parte 2</label>
                <input  type="file" id="imagen4" name="copiaCerPart2" accept="image/*"  >
                <span class="val" style="display: none" id="valid_cer2" >Campo obligatorio</span>
            </div>
            <div class="agrupador-cuadros">
                <label>Numero de Certificado</label>
                <input type="text" th:field="*{certificadoDeDiscapacidad.num_certificado}" >
            </div>
            <div class="agrupador-cuadros">
                <label>Fecha de Emision</label>
                <input type="date" th:value="*{certificadoDeDiscapacidad.fecha_emision}" name="fecE">
            </div>
            <div class="agrupador-cuadros">
                 
                <label for="certificado">¿La persona con discapacidad severa manifiesta su voluntad?</label>
                <div style="display:flex;gap:15px">
               <input id="rad_activo" type="radio" th:field="*{discapacitado.mani_voluntad}"  value="1" >
                <label  for="opcion1" >Si</label>
                               
                 <input id="rad_Inactivo" type="radio"  th:field="*{discapacitado.mani_voluntad}"  value="0" >
                <label  for="opcion2">No</label></div></div>
            
              <div class="agrupador-cuadros">
                <label for="certificado">¿La persona con discapacidad tiene dificultar para trasladarse a un banco?</label>
                <div style="display:flex;gap:15px">
                <input id="rad_activo" type="radio" th:field="*{discapacitado.difi_ir_banco}"  value="1" >
                <label  for="opcion1" >Si</label>
                               
                 <input id="rad_Inactivo" type="radio"  th:field="*{discapacitado.difi_ir_banco}"  value="0" >
                 <label  for="opcion2">No</label></div></div>
            </div>
            
            </div>
        </div>
        <div class="titulo-datos">
            <h3> Datos de la/el autorizada/o</h3>
         </div>
         <div class="contenedor-subformulario">
           
            <div class="agrupador-cuadros">
                <label for="dni">DNI</label>
                <input type="text" id="dniRepre" th:field="*{representante.persona.documentoDeIdentidad.nro_documento}" >
            </div>
              <div class="agrupador-cuadros">
                 <button class="boton" type="button" onclick="consumir2()">
                 <i class="fas fa-search"></i>  Buscar
                </button>
            </div>
            <div class="agrupador-cuadros2">
            </div>
            <div class="agrupador-cuadros">
                <label for="nombres">Nombres</label>
                <input type="text" id="nomRepre" th:field="*{representante.persona.nombre}" readonly >
            </div>
            <div class="agrupador-cuadros">
                <label for="apellido_paterno">Apellido Paterno</label>
                <input type="text" id="apellido_paternoR"  th:field="*{representante.persona.apell_paterno}" readonly>
            </div>
            <div class="agrupador-cuadros">
                <label for="apellido_materno">Apellido Materno</label>
                <input type="text" id="apellido_maternoR" th:field="*{representante.persona.apell_materno}" readonly>
            </div>
              <div class="agrupador-cuadros">
                <label for="apellido_materno">Sexo</label>
                <input type="text" id="apellido_materno" th:field="*{representante.persona.sexo.nom_sexo}">
            </div>
            <div class="agrupador-cuadros">
                <label for="celular">Teléfono Celular</label>
                <input type="text" id="celular" th:field="*{representante.tel_fijo}">
            </div>
            <div class="agrupador-cuadros">
                <label for="correo">Correo Electrónico</label>
                <input type="email" id="correo" th:field="*{representante.correo}" >
            </div>
            <div class="agrupador-cuadros">
                <label for="tipo-relacion">Parentesco</label>
                <select name="parentesco" id="tipo-relacion">
                    <option value="" disabled selected>Seleccione una opción</option>
                    <option th:each="item : ${parentescos}" th:value="${item.id_tipo_relacion}" th:text="${item.nom_tipo_relacion}"
                      th:selected="*{discapacitado_Representane.tipoRelacion.id_tipo_relacion}== ${item.id_tipo_relacion}"   ></option>
                </select>
            </div>
            <div class="agrupador-cuadros">
                <label>Adjunte informe de condición social</label>
                <input  type="file" id="imagen4" name="informeCondificonLegal" accept="image/*"  >
            </div>
            <div class="agrupador-cuadros">
                <label for="archivo" class="upload-label">Hoja parte 1</label>
                <input type="file" name="hoja1" class="upload-input" />
            </div>
             <div class="agrupador-cuadros">
                <label for="archivo" class="upload-label">Hoja parte 2</label>
                <input type="file"  name="hoja2"  class="upload-input" />
            </div>
            <div class="agrupador-cuadros2">
            </div>
             <div class="agrupador-cuadros2">
            </div>
        </div>
        <div class="estilo-btn">
            <button type="submit" class="btn-guardar">
                Guardar
            </button>
            <button type="button" class="btn-cancelar">
                <i class="fas fa-times"></i> Cancelar
            </button>
        </div>
    </div>
       </form>
     <script src="/MisScripts/script_Nabvar.js"></script>
     
     <script>
         function consumir1() {
            const dni = document.getElementById("dniDisc").value;
            fetch(`/api/dni?numero=${dni}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Error en la solicitud: ${response.statusText}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log(data);
                        document.getElementById("apellPaternoDisc").value = data.apellidoPaterno;
                        document.getElementById("nomDisc").value = data.nombres;
                        document.getElementById("apellMaternoDisc").value = data.apellidoMaterno;
                    })
                    .catch(error => {
                        console.error("Error en la solicitud:", error);
                    });

        }

        function consumir2() {
            const dni = document.getElementById("dniRepre").value;
            fetch(`/api/dni?numero=${dni}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Error en la solicitud: ${response.statusText}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log(data);
                        document.getElementById("apellido_paternoR").value = data.apellidoPaterno;
                        document.getElementById("nomRepre").value = data.nombres;
                        document.getElementById("apellido_maternoR").value = data.apellidoMaterno;
                    })
                    .catch(error => {
                        console.error("Error en la solicitud:", error);
                    });

        }

     </script>
</body>
</html>